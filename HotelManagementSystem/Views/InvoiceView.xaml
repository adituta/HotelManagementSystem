<UserControl x:Class="HotelManagementSystem.Views.InvoiceView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="600"
             Background="White">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="30">
            <TextBlock Text="FACTURĂ FINALĂ SEJUR" FontSize="24" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,20" Foreground="#2C3E50"/>

            <!-- Detalii Cazare -->
            <GroupBox Header="1. Detalii Cameră" Margin="0,10" Padding="10">
                <Grid>
                    <TextBlock Text="Cost Cazare (Bază):" HorizontalAlignment="Left"/>
                    <TextBlock Text="{Binding RoomTotal, StringFormat='{}{0:N2} RON'}" HorizontalAlignment="Right" FontWeight="Bold"/>
                </Grid>
            </GroupBox>

            <!-- Detalii Mâncare -->
            <GroupBox Header="2. Consum Restaurant" Margin="0,10" Padding="10">
                <StackPanel>
                    <ItemsControl ItemsSource="{Binding FoodItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,2">
                                    <TextBlock Text="{Binding FoodDetails}" HorizontalAlignment="Left"/>
                                    <TextBlock Text="{Binding Cost, StringFormat='{}{0:N2} RON'}" HorizontalAlignment="Right"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <Separator Margin="0,10"/>
                    <TextBlock Text="{Binding FoodTotal, StringFormat='Total Mâncare: {0:N2} RON'}" HorizontalAlignment="Right" FontWeight="Bold" Foreground="#D35400"/>
                </StackPanel>
            </GroupBox>

            <!-- Detalii SPA -->
            <GroupBox Header="3. Servicii SPA" Margin="0,10" Padding="10">
                <StackPanel>
                    <ItemsControl ItemsSource="{Binding SpaItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,2">
                                    <TextBlock Text="{Binding SpaService.Name}" HorizontalAlignment="Left"/>
                                    <!-- AICI ERA EROAREA: Am adaugat {} la inceputul StringFormat -->
                                    <TextBlock Text="{Binding SpaService.PricePerPerson, StringFormat='{}{0} RON x Pers'}" HorizontalAlignment="Right" Margin="0,0,80,0"/>
                                    <TextBlock Text="{Binding PersonsCount, StringFormat='{}x {0}'}" HorizontalAlignment="Right" Margin="0,0,40,0"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <Separator Margin="0,10"/>
                    <TextBlock Text="{Binding SpaTotal, StringFormat='Total SPA: {0:N2} RON'}" HorizontalAlignment="Right" FontWeight="Bold" Foreground="#8E44AD"/>
                </StackPanel>
            </GroupBox>

            <!-- TOTAL GENERAL -->
            <Border Background="#2C3E50" Padding="15" CornerRadius="5" Margin="0,20">
                <Grid>
                    <TextBlock Text="TOTAL DE PLATĂ" Foreground="White" FontSize="18" FontWeight="Bold"/>
                    <TextBlock Text="{Binding GrandTotal, StringFormat='{}{0:N2} RON'}" Foreground="#1ABC9C" FontSize="22" FontWeight="Bold" HorizontalAlignment="Right"/>
                </Grid>
            </Border>

            <!-- SECTIUNE REVIEW -->
            <StackPanel Margin="0,20">
                <TextBlock Text="Opinia dvs. contează pentru noi!" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                <TextBox Text="{Binding ReviewText, UpdateSourceTrigger=PropertyChanged}" Height="80" TextWrapping="Wrap" AcceptsReturn="True" VerticalContentAlignment="Top" Padding="5"/>

                <StackPanel Orientation="Horizontal" Margin="0,10">
                    <TextBlock Text="Rating (1-5 stele): " VerticalAlignment="Center"/>
                    <ComboBox SelectedValue="{Binding ReviewStars}" Width="80" Margin="10,0">
                        <sys:Int32>1</sys:Int32>
                        <sys:Int32>2</sys:Int32>
                        <sys:Int32>3</sys:Int32>
                        <sys:Int32>4</sys:Int32>
                        <sys:Int32>5</sys:Int32>
                    </ComboBox>
                </StackPanel>

                <Button Content="FINALIZEAZĂ SEJUR ȘI PLĂTEȘTE" 
                        Command="{Binding FinishStayCommand}" 
                        Height="45" Background="#27AE60" Foreground="White" FontWeight="Bold" Margin="0,10" Cursor="Hand"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>